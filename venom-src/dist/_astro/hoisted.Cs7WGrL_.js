import"./hoisted.NBWk1qCK.js";const S="https://ecdsa.pub/venom-preview/api/snap",y=document.getElementById("url-input"),Q=document.getElementById("bot-select"),T=document.getElementById("device-select"),u=document.getElementById("load-btn"),p=document.getElementById("original-panel"),v=document.getElementById("poisoned-panel"),C=document.getElementById("original-stats"),U=document.getElementById("poisoned-stats"),i=document.getElementById("lightbox"),g=document.getElementById("lightbox-img"),O=document.getElementById("lightbox-label"),q=document.getElementById("lightbox-hint"),j=document.getElementById("lightbox-content"),M=document.querySelector(".lightbox-close"),H=document.querySelector(".lightbox-prev"),D=document.querySelector(".lightbox-next"),F=document.querySelectorAll(".lightbox-dot"),c=document.getElementById("panels-container"),x=document.getElementById("scroll-indicator"),W=document.querySelectorAll(".scroll-dot");let d=null,A=!1,n=[],a=0,z=0,N=0,h=null,E=!1,L=[];function V(){const t=T.value==="mobile"?"390 / 844":"16 / 9";document.documentElement.style.setProperty("--preview-aspect-ratio",t)}function R(e){e.innerHTML=`
      <div class="loading">
        <div class="loading-dots">●●●</div>
        <span style="font-size: 12px;">Generating screenshot...</span>
      </div>
    `}function $(e,t){e.innerHTML=`
      <div class="error">
        <div style="font-size: 20px; margin-bottom: 8px;">⚠</div>
        <span style="font-size: 12px;">${t}</span>
      </div>
    `}function P(e,t,o,s){const l=document.createElement("img");l.src=t,l.alt=`${s} screenshot - click to enlarge`,l.loading="eager",l.addEventListener("click",()=>Z(o)),e.innerHTML="",e.appendChild(l),n[o]={src:t,label:s}}function Y(){L.forEach(e=>URL.revokeObjectURL(e)),L=[],n=[]}function X(){F.forEach((e,t)=>{e.classList.toggle("active",t===a)})}function K(){H.classList.toggle("hidden",a===0),D.classList.toggle("hidden",a>=n.length-1)}function b(e){e<0||e>=n.length||!n[e]||(a=e,g.classList.add("transitioning"),setTimeout(()=>{g.src=n[e].src,O.textContent=n[e].label,X(),K(),g.classList.remove("transitioning")},100))}function Z(e){h=document.activeElement,E=!1,a=e,g.src=n[e].src,g.alt=`${n[e].label} - Image ${e+1} of ${n.length}`,O.textContent=n[e].label,q.classList.remove("hidden"),X(),K(),i.classList.add("active"),document.body.style.overflow="hidden",setTimeout(()=>M.focus(),100)}function w(){i.classList.remove("active"),document.body.style.overflow="",h&&(h.focus(),h=null)}function r(e){const t=a+e;t>=0&&t<n.length&&n[t]&&(b(t),E||(E=!0,q.classList.add("hidden")))}function ee(e){if(!i.classList.contains("active")||e.key!=="Tab")return;const t=i.querySelectorAll('button:not([disabled]), [tabindex]:not([tabindex="-1"])'),o=t[0],s=t[t.length-1];e.shiftKey&&document.activeElement===o?(e.preventDefault(),s.focus()):!e.shiftKey&&document.activeElement===s&&(e.preventDefault(),o.focus())}async function f(){const e=y.value.trim();if(!e){alert("Please enter a URL");return}V(),d&&d.abort(),d=new AbortController;const t=Q.value,o=T.value;u.disabled=!0,u.textContent="Loading...",R(p),R(v),C.textContent="",U.textContent="";try{const s=`${S}?mode=${o}&url=${encodeURIComponent(e)}`,l=`${S}?bot=${t}&inline=yes&mode=${o}&url=${encodeURIComponent(e)}`,[m,I]=await Promise.all([fetch(s,{signal:d.signal}),fetch(l,{signal:d.signal})]);if(!m.ok||!I.ok)throw new Error("Failed to generate screenshots");const[_,J]=await Promise.all([m.blob(),I.blob()]);Y();const k=URL.createObjectURL(_),B=URL.createObjectURL(J);L=[k,B],P(p,k,0,"Original (Human View)"),P(v,B,1,"VENOM Preview (AI Crawler View)"),C.textContent=`Mode: ${o}`,U.textContent=`Bot: ${t}`}catch(s){if(s.name==="AbortError")return;console.error("Error:",s),$(p,"Failed to load"),$(v,s.message||"Failed to load")}finally{u.disabled=!1,u.textContent="Load Preview"}}M.addEventListener("click",w);H.addEventListener("click",()=>r(-1));D.addEventListener("click",()=>r(1));F.forEach(e=>{e.addEventListener("click",()=>{const t=parseInt(e.dataset.index||"0",10);b(t)})});i.addEventListener("click",e=>{e.target===i&&w()});document.addEventListener("keydown",e=>{if(i.classList.contains("active"))switch(ee(e),e.key){case"Escape":w();break;case"ArrowLeft":r(-1);break;case"ArrowRight":r(1);break;case"Home":b(0);break;case"End":b(n.length-1);break}});j.addEventListener("touchstart",e=>{z=e.changedTouches[0].screenX},{passive:!0});j.addEventListener("touchend",e=>{N=e.changedTouches[0].screenX,te()},{passive:!0});function te(){const t=z-N;Math.abs(t)>75&&(t>0?r(1):r(-1))}u.addEventListener("click",f);y.addEventListener("keydown",e=>{e.key==="Enter"&&f()});document.querySelectorAll(".example-btn").forEach(e=>{e.addEventListener("click",()=>{y.value=e.dataset.url||"",f()})});function G(){const e=c.scrollWidth>c.clientWidth+10;return x.style.display=e?"flex":"none",e}function ne(){const e=c.scrollLeft,t=c.scrollWidth-c.clientWidth,s=(t>0?e/t:0)>.5?1:0;W.forEach((l,m)=>{l.classList.toggle("active",m===s)})}c.addEventListener("scroll",()=>{ne(),A||(A=!0,x.classList.remove("pulse"))},{passive:!0});W.forEach(e=>{e.addEventListener("click",()=>{const t=parseInt(e.dataset.index||"0",10),o=c.querySelectorAll(".panel-card");o[t]&&o[t].scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})})});window.addEventListener("resize",G);G()&&window.matchMedia("(hover: none), (pointer: coarse)").matches&&x.classList.add("pulse");V();f();
